#!/usr/bin/env ruby

root = File.expand_path(File.join(File.dirname(__FILE__),'..'))
if File.directory?(File.join(root,'.git'))
  Dir.chdir(root) do
    begin
      require 'bundler/setup'
    rescue LoadError => e
      warn e.message
      warn "Run `gem install bundler` to install Bundler"
      exit -1
    end
  end
end
require 'thor'
class DotterCLI < Thor
	desc "version", "Print the dotter version"
	def version
		require 'dotter/version'
		puts "This is dotter #{Dotter::VERSION}"
	end
	desc "init", "Initialise the directory structure for ~/dotfiles"
	def init
		puts "Initialising ~/dotfiles"
	end
	desc "list", "List all packages present in ~/dotfiles"
	def list
		puts "List of packages in ~/dotfiles"
	end
	desc "stow PACKAGE" "Stow the given package name."
	def stow(package)
		puts "Stowing package #{package}"
	end
end
DotterCLI.start(ARGV)
